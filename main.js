(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,i=0;i<e.length;i++)if(e[i].identifier===n){t=i;break}return t}function i(n,i){for(var o={},s=[],a=0;a<n.length;a++){var l=n[a],c=i.base?l[0]+i.base:l[0],d=o[c]||0,A="".concat(c," ").concat(d);o[c]=d+1;var h=t(A),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var m=r(u,i);i.byIndex=a,e.splice(a,0,{identifier:A,updater:m,references:1})}s.push(A)}return s}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var o=i(n=n||[],r=r||{});return function(n){n=n||[];for(var s=0;s<o.length;s++){var a=t(o[s]);e[a].references--}for(var l=i(n,r),c=0;c<o.length;c++){var d=t(o[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=l}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},288:(n,e,t)=>{t.d(e,{A:()=>a});var i=t(354),r=t.n(i),o=t(314),s=t.n(o)()(r());s.push([n.id,"/*! modern-normalize v3.0.1 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n::before,\n::after {\n\tbox-sizing: border-box;\n}\n\nhtml {\n\t/* Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3) */\n\tfont-family:\n\t\tsystem-ui,\n\t\t'Segoe UI',\n\t\tRoboto,\n\t\tHelvetica,\n\t\tArial,\n\t\tsans-serif,\n\t\t'Apple Color Emoji',\n\t\t'Segoe UI Emoji';\n\tline-height: 1.15; /* 1. Correct the line height in all browsers. */\n\t-webkit-text-size-adjust: 100%; /* 2. Prevent adjustments of font size after orientation changes in iOS. */\n\ttab-size: 4; /* 3. Use a more readable tab size (opinionated). */\n}\n\n/*\nSections\n========\n*/\n\nbody {\n\tmargin: 0; /* Remove the margin in all browsers. */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct font weight in Chrome and Safari.\n*/\n\nb,\nstrong {\n\tfont-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n\tfont-family:\n\t\tui-monospace,\n\t\tSFMono-Regular,\n\t\tConsolas,\n\t\t'Liberation Mono',\n\t\tMenlo,\n\t\tmonospace; /* 1 */\n\tfont-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n\tfont-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n\tfont-size: 75%;\n\tline-height: 0;\n\tposition: relative;\n\tvertical-align: baseline;\n}\n\nsub {\n\tbottom: -0.25em;\n}\n\nsup {\n\ttop: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\nCorrect table border color inheritance in Chrome and Safari. (https://issues.chromium.org/issues/40615503, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n\tborder-color: currentcolor;\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n\tfont-family: inherit; /* 1 */\n\tfont-size: 100%; /* 1 */\n\tline-height: 1.15; /* 1 */\n\tmargin: 0; /* 2 */\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n\t-webkit-appearance: button;\n}\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n\tpadding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n\tvertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n\theight: auto;\n}\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n\t-webkit-appearance: textfield; /* 1 */\n\toutline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n\t-webkit-appearance: none;\n}\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n::-webkit-file-upload-button {\n\t-webkit-appearance: button; /* 1 */\n\tfont: inherit; /* 2 */\n}\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n\tdisplay: list-item;\n}\n","",{version:3,sources:["webpack://./node_modules/modern-normalize/modern-normalize.css"],names:[],mappings:"AAAA,8FAA8F;;AAE9F;;;CAGC;;AAED;;CAEC;;AAED;;;CAGC,sBAAsB;AACvB;;AAEA;CACC,sHAAsH;CACtH;;;;;;;;kBAQiB;CACjB,iBAAiB,EAAE,gDAAgD;CACnE,8BAA8B,EAAE,0EAA0E;CAC1G,WAAW,EAAE,mDAAmD;AACjE;;AAEA;;;CAGC;;AAED;CACC,SAAS,EAAE,uCAAuC;AACnD;;AAEA;;;CAGC;;AAED;;CAEC;;AAED;;CAEC,mBAAmB;AACpB;;AAEA;;;CAGC;;AAED;;;;CAIC;;;;;;WAMU,EAAE,MAAM;CAClB,cAAc,EAAE,MAAM;AACvB;;AAEA;;CAEC;;AAED;CACC,cAAc;AACf;;AAEA;;CAEC;;AAED;;CAEC,cAAc;CACd,cAAc;CACd,kBAAkB;CAClB,wBAAwB;AACzB;;AAEA;CACC,eAAe;AAChB;;AAEA;CACC,WAAW;AACZ;;AAEA;;;CAGC;;AAED;;CAEC;;AAED;CACC,0BAA0B;AAC3B;;AAEA;;;CAGC;;AAED;;;CAGC;;AAED;;;;;CAKC,oBAAoB,EAAE,MAAM;CAC5B,eAAe,EAAE,MAAM;CACvB,iBAAiB,EAAE,MAAM;CACzB,SAAS,EAAE,MAAM;AAClB;;AAEA;;CAEC;;AAED;;;;CAIC,0BAA0B;AAC3B;;AAEA;;CAEC;;AAED;CACC,UAAU;AACX;;AAEA;;CAEC;;AAED;CACC,wBAAwB;AACzB;;AAEA;;CAEC;;AAED;;CAEC,YAAY;AACb;;AAEA;;;CAGC;;AAED;CACC,6BAA6B,EAAE,MAAM;CACrC,oBAAoB,EAAE,MAAM;AAC7B;;AAEA;;CAEC;;AAED;CACC,wBAAwB;AACzB;;AAEA;;;CAGC;;AAED;CACC,0BAA0B,EAAE,MAAM;CAClC,aAAa,EAAE,MAAM;AACtB;;AAEA;;;CAGC;;AAED;;CAEC;;AAED;CACC,kBAAkB;AACnB",sourcesContent:["/*! modern-normalize v3.0.1 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n::before,\n::after {\n\tbox-sizing: border-box;\n}\n\nhtml {\n\t/* Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3) */\n\tfont-family:\n\t\tsystem-ui,\n\t\t'Segoe UI',\n\t\tRoboto,\n\t\tHelvetica,\n\t\tArial,\n\t\tsans-serif,\n\t\t'Apple Color Emoji',\n\t\t'Segoe UI Emoji';\n\tline-height: 1.15; /* 1. Correct the line height in all browsers. */\n\t-webkit-text-size-adjust: 100%; /* 2. Prevent adjustments of font size after orientation changes in iOS. */\n\ttab-size: 4; /* 3. Use a more readable tab size (opinionated). */\n}\n\n/*\nSections\n========\n*/\n\nbody {\n\tmargin: 0; /* Remove the margin in all browsers. */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct font weight in Chrome and Safari.\n*/\n\nb,\nstrong {\n\tfont-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n\tfont-family:\n\t\tui-monospace,\n\t\tSFMono-Regular,\n\t\tConsolas,\n\t\t'Liberation Mono',\n\t\tMenlo,\n\t\tmonospace; /* 1 */\n\tfont-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n\tfont-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n\tfont-size: 75%;\n\tline-height: 0;\n\tposition: relative;\n\tvertical-align: baseline;\n}\n\nsub {\n\tbottom: -0.25em;\n}\n\nsup {\n\ttop: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\nCorrect table border color inheritance in Chrome and Safari. (https://issues.chromium.org/issues/40615503, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n\tborder-color: currentcolor;\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n\tfont-family: inherit; /* 1 */\n\tfont-size: 100%; /* 1 */\n\tline-height: 1.15; /* 1 */\n\tmargin: 0; /* 2 */\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n\t-webkit-appearance: button;\n}\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n\tpadding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n\tvertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n\theight: auto;\n}\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n\t-webkit-appearance: textfield; /* 1 */\n\toutline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n\t-webkit-appearance: none;\n}\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n::-webkit-file-upload-button {\n\t-webkit-appearance: button; /* 1 */\n\tfont: inherit; /* 2 */\n}\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n\tdisplay: list-item;\n}\n"],sourceRoot:""}]);const a=s},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",i=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),i&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),i&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,i,r,o){"string"==typeof n&&(n=[[null,n,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);i&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},354:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),o="/*# ".concat(r," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},365:(n,e,t)=>{t.d(e,{A:()=>a});var i=t(354),r=t.n(i),o=t(314),s=t.n(o)()(r());s.push([n.id,'body {\n    font-family: sans-serif;\n    text-align: center;\n}\n\n.boards {\n    display: flex;\n    justify-content: center;\n    gap: 2rem;\n    margin-top: 1rem;\n}\n\n.board-area {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n}\n\n.board-column {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.fleet-status {\n    list-style: none;\n    padding: 0;\n    text-align: left;\n    min-width: 8rem;\n}\n\n.board {\n    display: grid;\n    grid-template: repeat(10, 2rem) / repeat(10, 2rem);\n    gap: 2px;\n}\n\n#placement-modal .board {\n    margin: 1rem auto 0;\n}\n\n.gridCell {\n    border: 1px solid #444;\n    background-color: #e5e7eb;\n}\n\n#board2 .gridCell {\n    cursor: pointer;\n}\n\n#board2 .disabled .gridCell {\n    cursor: not-allowed;\n    pointer-events: none;\n}\n\n.gridShip {\n    background-color: #3b82f6;\n}\n\n.gridHit {\n    background-color: #ef4444;\n}\n\n.gridMiss::after {\n    content: "x";\n    color: #947805;\n    font-size: 1.6rem;\n    line-height: 1.8rem;\n    display: block;\n}\n\n.gridHit,\n.gridMiss {\n    pointer-events: none;\n}\n\n.modal {\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.modal-content {\n    background-color: white;\n    padding: 1rem;\n    border-radius: 4px;\n    text-align: left;\n}\n\n.hidden {\n    display: none;\n}',"",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA;IACI,uBAAuB;IACvB,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,uBAAuB;IACvB,SAAS;IACT,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,SAAS;AACb;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;IAChB,UAAU;IACV,gBAAgB;IAChB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,kDAAkD;IAClD,QAAQ;AACZ;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,sBAAsB;IACtB,yBAAyB;AAC7B;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,mBAAmB;IACnB,oBAAoB;AACxB;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,YAAY;IACZ,cAAc;IACd,iBAAiB;IACjB,mBAAmB;IACnB,cAAc;AAClB;;AAEA;;IAEI,oBAAoB;AACxB;;AAEA;IACI,eAAe;IACf,QAAQ;IACR,oCAAoC;IACpC,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,uBAAuB;IACvB,aAAa;IACb,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,aAAa;AACjB",sourcesContent:['body {\n    font-family: sans-serif;\n    text-align: center;\n}\n\n.boards {\n    display: flex;\n    justify-content: center;\n    gap: 2rem;\n    margin-top: 1rem;\n}\n\n.board-area {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n}\n\n.board-column {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.fleet-status {\n    list-style: none;\n    padding: 0;\n    text-align: left;\n    min-width: 8rem;\n}\n\n.board {\n    display: grid;\n    grid-template: repeat(10, 2rem) / repeat(10, 2rem);\n    gap: 2px;\n}\n\n#placement-modal .board {\n    margin: 1rem auto 0;\n}\n\n.gridCell {\n    border: 1px solid #444;\n    background-color: #e5e7eb;\n}\n\n#board2 .gridCell {\n    cursor: pointer;\n}\n\n#board2 .disabled .gridCell {\n    cursor: not-allowed;\n    pointer-events: none;\n}\n\n.gridShip {\n    background-color: #3b82f6;\n}\n\n.gridHit {\n    background-color: #ef4444;\n}\n\n.gridMiss::after {\n    content: "x";\n    color: #947805;\n    font-size: 1.6rem;\n    line-height: 1.8rem;\n    display: block;\n}\n\n.gridHit,\n.gridMiss {\n    pointer-events: none;\n}\n\n.modal {\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.modal-content {\n    background-color: white;\n    padding: 1rem;\n    border-radius: 4px;\n    text-align: left;\n}\n\n.hidden {\n    display: none;\n}'],sourceRoot:""}]);const a=s},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},659:n=>{var e={};n.exports=function(n,t){var i=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,r&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,exports:{}};return n[i](o,o.exports,t),o.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var i in e)t.o(e,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var i=t(72),r=t.n(i),o=t(825),s=t.n(o),a=t(659),l=t.n(a),c=t(56),d=t.n(c),A=t(540),h=t.n(A),u=t(113),m=t.n(u),p=t(288),C={};C.styleTagTransform=m(),C.setAttributes=d(),C.insert=l().bind(null,"head"),C.domAPI=s(),C.insertStyleElement=h(),r()(p.A,C),p.A&&p.A.locals&&p.A.locals;var f=t(365),b={};b.styleTagTransform=m(),b.setAttributes=d(),b.insert=l().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=h(),r()(f.A,b),f.A&&f.A.locals&&f.A.locals;class g{constructor(n,e){this.name=n,this.length=e,this.damage=0}hit(){this.damage<this.length&&this.damage++}isSunk(){return this.damage===this.length}}const y=10,v=10;class B{constructor(){this.firedUpon=!1,this.ship=null}}class E{constructor(){this.matrix=new Array(y).fill(null).map((()=>new Array(v).fill(null).map((()=>new B)))),this.fleet=[]}#n(n,e,t,i){switch(i){case"h":if(t+n>v)throw new Error("Out of bounds horizontal placement");for(let i=t;i<t+n;i++)if(this.matrix[e][i].ship)throw new Error("Collision");break;case"v":if(e+n>y)throw new Error("Out of bounds vertical placement");for(let i=e;i<e+n;i++)if(this.matrix[i][t].ship)throw new Error("Collision")}}placeShip(n,e,t,i){if("h"!==i&&"v"!==i)throw new Error("Invalid direction");switch(this.#n(n.length,e,t,i),i){case"h":for(let i=t;i<t+n.length;i++)this.matrix[e][i].ship=n;break;case"v":for(let i=e;i<e+n.length;i++)this.matrix[i][t].ship=n}this.fleet.includes(n)||this.fleet.push(n)}removeShip(n){for(let e of this.matrix)for(let t of e)t.ship===n&&(t.ship=null);const e=this.fleet.indexOf(n);-1!==e&&this.fleet.splice(e,1)}receiveAttack(n,e){if(n<0||e<0||n>=y||e>=v)throw new Error("Out of bounds");if(this.areCoordinatesFiredUpon(n,e))throw new Error("Duplicate attack");let t=!1,i=!1;return this.matrix[n][e].firedUpon=!0,this.matrix[n][e].ship&&(this.matrix[n][e].ship.hit(),t=!0,this.matrix[n][e].ship.isSunk()&&(i=!0)),{hit:t,sunk:i}}get fleetGone(){for(let n of this.fleet)if(!n.isSunk())return!1;return!0}areCoordinatesFiredUpon(n,e){return this.matrix[n][e].firedUpon}}class w{constructor(n){this.isComputer=n,this.Gameboard=new E,this.attackQueue=[],this.hitGroups=[]}attack(n,e,t){let i=n.receiveAttack(e,t);return this.isComputer&&i.hit&&this.#e(n,e,t,i.sunk),i}#t(n,e){return n>=0&&n<y&&e>=0&&e<v}#i(n,e){return this.attackQueue.some((t=>t[0]===n&&t[1]===e))}#r(n,e){this.#t(n,e)&&!this.#i(n,e)&&this.attackQueue.unshift([n,e])}#o(n,e){for(const t of this.hitGroups)for(const[i,r]of t.hits)if(Math.abs(i-n)+Math.abs(r-e)===1)return t;return null}#e(n,e,t,i){let r=this.#o(e,t);if(r||(r={hits:[],orientation:null},this.hitGroups.push(r)),r.hits.push([e,t]),i){this.attackQueue=this.attackQueue.filter((([n,e])=>!r.hits.some((([t,i])=>Math.abs(t-n)+Math.abs(i-e)===1))));const n=this.hitGroups.indexOf(r);this.hitGroups.splice(n,1)}else{if(!r.orientation&&r.hits.length>=2){const[n,e]=r.hits;r.orientation=n[0]===e[0]?"h":"v"}if(r.orientation)if("h"===r.orientation){const e=r.hits[0][0],t=r.hits.map((n=>n[1])),i=Math.min(...t)-1,o=Math.max(...t)+1;this.#t(e,i)&&!n.areCoordinatesFiredUpon(e,i)&&this.#r(e,i),this.#t(e,o)&&!n.areCoordinatesFiredUpon(e,o)&&this.#r(e,o)}else{const e=r.hits[0][1],t=r.hits.map((n=>n[0])),i=Math.min(...t)-1,o=Math.max(...t)+1;this.#t(i,e)&&!n.areCoordinatesFiredUpon(i,e)&&this.#r(i,e),this.#t(o,e)&&!n.areCoordinatesFiredUpon(o,e)&&this.#r(o,e)}else{const i=[[e-1,t],[e+1,t],[e,t-1],[e,t+1]];for(const[e,t]of i)this.#t(e,t)&&!n.areCoordinatesFiredUpon(e,t)&&this.#r(e,t)}}}getRandomAttack(n){let e,t;function i(n){return Math.floor(Math.random()*n)}do{e=i(y),t=i(v)}while(n.areCoordinatesFiredUpon(e,t));return[e,t]}getAttackCoordinates(n){for(;this.attackQueue.length;){const[e,t]=this.attackQueue.shift();if(!n.areCoordinatesFiredUpon(e,t))return[e,t]}return this.getRandomAttack(n)}}class k{ui;constructor(n="hvc"){this.playerOne=new w(!1),this.playerTwo=new w("hvc"===n),this.current=this.playerOne,this.turnCount=0,this.mode=n}#s(n){const e=[["Carrier",5],["Battleship",4],["Destroyer",3],["Submarine",3],["Patrol Boat",2]];for(const t of e){const i=new g(t[0],t[1]);let r=!1;for(;!r;){const o=Math.random()<.5?"h":"v";function s(n){return Math.floor(Math.random()*n)}const a=s(y),l=s(v);try{n.placeShip(i,a,l,o),r=!0}catch{}}}}async start(){if(!this.ui)throw new Error("UI controller not set in Game Controller");await this.ui.showPlacementModal(this.playerOne.Gameboard),"hvc"===this.mode?this.#s(this.playerTwo.Gameboard):await this.ui.showPlacementModal(this.playerTwo.Gameboard);const n=this.current===this.playerOne?this.playerTwo:this.playerOne;this.ui.renderBoards(this.current.Gameboard,n.Gameboard),"hvc"===this.mode?this.ui.enableClicks():this.ui.enableClicks("Player 1's turn")}processMove(n,e){const t=this.current===this.playerOne?this.playerTwo:this.playerOne,i=this.current.attack(t.Gameboard,n,e);if(this.turnCount++,this.turnCount>=17&&t.Gameboard.fleetGone){let n;return"hvh"===this.mode?this.ui.renderBoards(this.current.Gameboard,t.Gameboard):this.ui.renderBoards(this.playerOne.Gameboard,this.playerTwo.Gameboard),n="hvc"===this.mode?this.current===this.playerOne?"human":"computer":this.current===this.playerOne?"Player 1":"Player 2",void this.ui.showGameOver(n)}i.hit||(this.current=t);const r=this.current===this.playerOne?this.playerTwo:this.playerOne;if(this.ui.renderBoards(this.current.Gameboard,r.Gameboard),"hvc"===this.mode&&this.current.isComputer)this.ui.renderBoards(r.Gameboard,this.current.Gameboard),this.#a();else if("hvh"!==this.mode||i.hit)if(this.ui.renderBoards(this.current.Gameboard,r.Gameboard),"hvc"===this.mode)this.ui.enableClicks();else{const n=this.current===this.playerOne?"Player 1's turn":"Player 2's turn";this.ui.enableClicks(n)}else this.ui.showTurnSwitchPrompt(this.current===this.playerOne?"Player 1":"Player 2").then((()=>{this.ui.renderBoards(this.current.Gameboard,r.Gameboard);const n=this.current===this.playerOne?"Player 1's turn":"Player 2's turn";this.ui.enableClicks(n)}))}#a(){this.ui.disableClicks("Computer thinking..."),setTimeout((()=>{const[n,e]=this.playerTwo.getAttackCoordinates(this.playerOne.Gameboard);this.processMove(n,e)}),1e3)}}const I=[["Carrier",5],["Battleship",4],["Destroyer",3],["Submarine",3],["Patrol Boat",2]];class S{constructor(n){this.game=n,this.leftGrid=document.querySelector("#board1 .board"),this.rightGrid=document.querySelector("#board2 .board"),this.leftFleet=document.querySelector("#board1 .fleet-status"),this.rightFleet=document.querySelector("#board2 .fleet-status"),this.status=document.querySelector("#status"),this.handleCellClick=this.#l.bind(this),this.boardsContainer=document.querySelector(".boards"),this.placementModal=document.querySelector("#placement-modal"),this.placementGrid=document.querySelector("#placement-grid"),this.shipSelect=document.querySelector("#ship-select"),this.orientationToggle=document.querySelector("#orientation-toggle"),this.confirmPlacement=document.querySelector("#confirm-placement"),this.orientation="h",this.shipInstances=new Map,this.placements=new Map}#c(){[this.leftGrid,this.rightGrid].forEach((n=>{for(let e=0;e<y;e++)for(let t=0;t<v;t++){const i=document.createElement("div");i.classList.add("gridCell"),i.dataset.row=e,i.dataset.col=t,n.appendChild(i)}}))}async init(){this.#c(),await this.game.start()}showPlacementModal(n){return new Promise((e=>{this.placementGrid.innerHTML="";for(let n=0;n<y;n++)for(let e=0;e<v;e++){const t=document.createElement("div");t.classList.add("gridCell"),t.dataset.row=n,t.dataset.col=e,this.placementGrid.appendChild(t)}this.shipSelect.innerHTML="",this.shipInstances.clear(),this.placements.clear(),I.forEach((([n,e])=>{const t=document.createElement("option");t.value=n,t.textContent=n,this.shipSelect.appendChild(t),this.shipInstances.set(n,new g(n,e))})),this.orientation="h",this.orientationToggle.textContent="Horizontal";const t=()=>{this.orientation="h"===this.orientation?"v":"h",this.orientationToggle.textContent="h"===this.orientation?"Horizontal":"Vertical"},i=e=>{const t=e.target;if(!t.classList.contains("gridCell"))return;const i=parseInt(t.dataset.row),r=parseInt(t.dataset.col),o=this.shipSelect.value,s=this.shipInstances.get(o),a=this.placements.get(o);let l=!1;if(a&&a.row===i&&a.col===r)n.removeShip(s),this.placements.delete(o),l=!0;else{a&&(n.removeShip(s),this.placements.delete(o));try{n.placeShip(s,i,r,this.orientation),this.placements.set(o,{row:i,col:r}),l=!0}catch{}}l&&(this.#d(this.placementGrid,n,!0),this.confirmPlacement.disabled=this.placements.size!==I.length)},r=()=>{this.placementModal.classList.add("hidden"),this.orientationToggle.removeEventListener("click",t),this.placementGrid.removeEventListener("click",i),this.confirmPlacement.removeEventListener("click",r),e()};this.orientationToggle.addEventListener("click",t),this.placementGrid.addEventListener("click",i),this.confirmPlacement.addEventListener("click",r),this.confirmPlacement.disabled=!0,this.placementModal.classList.remove("hidden"),this.#d(this.placementGrid,n,!0)}))}#d(n,e,t){n.querySelectorAll(".gridCell").forEach((n=>{const i=n.dataset.row,r=n.dataset.col,o=e.matrix[i][r];n.className="gridCell",t&&o.ship&&n.classList.add("gridShip"),o.firedUpon&&n.classList.add(o.ship?"gridHit":"gridMiss")}))}#A(n,e){e.innerHTML="",n.fleet.filter((n=>!n.isSunk())).forEach((n=>{const t=document.createElement("li");t.textContent=`${n.name}: ${n.damage}/${n.length}`,e.appendChild(t)}))}renderBoards(n,e){this.#d(this.leftGrid,n,!0),this.#d(this.rightGrid,e,!1),this.#A(n,this.leftFleet),this.#A(e,this.rightFleet)}showTurnSwitchPrompt(n){return new Promise((e=>{this.boardsContainer.classList.add("hidden");const t=document.createElement("div");t.classList.add("modal");const i=document.createElement("div");i.classList.add("modal-content");const r=document.createElement("button");r.textContent=n?`Next Player: ${n}`:"Next Player",i.appendChild(r),t.appendChild(i),document.body.appendChild(t);const o=()=>{r.removeEventListener("click",o),t.remove(),this.boardsContainer.classList.remove("hidden"),e()};r.addEventListener("click",o)}))}enableClicks(n="Your turn"){this.status.textContent=n,this.rightGrid.addEventListener("click",this.handleCellClick),this.rightGrid.classList.remove("disabled")}disableClicks(n="Passing turn"){this.status.textContent=n,this.rightGrid.removeEventListener("click",this.handleCellClick),this.rightGrid.classList.add("disabled")}#l(n){const e=n.target;if(!e.classList.contains("gridCell"))return;if(e.classList.contains("gridHit")||e.classList.contains("gridMiss"))return;const t=e.dataset.row,i=e.dataset.col;this.disableClicks(),this.game.processMove(t,i)}showGameOver(n){this.disableClicks(),"hvc"===this.game.mode?this.status.textContent="human"===n?"You win!":"Computer wins!":this.status.textContent=`${n} wins!`}}document.addEventListener("DOMContentLoaded",(()=>{!async function(){const n=await new Promise((n=>{const e=document.querySelector("#start-modal"),t=e.querySelectorAll("button");function i(r){const o=r.target.dataset.mode;e.classList.add("hidden"),t.forEach((n=>n.removeEventListener("click",i))),n(o)}t.forEach((n=>n.addEventListener("click",i))),e.classList.remove("hidden")})),e=new k(n),t=new S(e);e.ui=t,t.init()}()}))})();
//# sourceMappingURL=main.js.map